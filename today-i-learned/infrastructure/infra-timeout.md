---
description: ν”„λ΅κ·Έλλ°μ„ ν•λ©΄μ„ κ°€μ¥ λ§λ‚κΈ° μ‹«μ€ νƒ€μ„μ•„μ›ƒμ μΆ…λ¥μ— λ€ν•΄ κ°„λ‹¨ν μ•μ•„λ³΄μ•λ‹¤.
---

# π© Infra : Timeout

## Connection Timeout?

ν΄λΌμ΄μ–ΈνΈκ°€ μ„λ²„μ— μ—°κ²°μ„ μ‹λ„ν•  λ•, μΌμ • μ‹κ°„ μ•μ— μ—°κ²°μ΄ μ„±λ¦½λμ§€ μ•μΌλ©΄ λ°μƒν•λ” νƒ€μ„μ•„μ›ƒμ΄λ‹¤.\
TCP κΈ°λ°μ ν†µμ‹ μ—μ„λ” 3-way-handshake κ³Όμ •μ„ ν†µν•΄ μ„Έμ…μ„ μλ¦½ν•λ‹¤.\
`Connection Timeout`μ€ μ΄ κ³Όμ •μ΄ μ •ν•΄μ§„ μ‹κ°„ λ‚΄μ— μ™„λ£λμ§€ μ•μ„ κ²½μ° λ°μƒν•λ‹¤.

> μ¦‰, μ„λ²„κ°€ μ£½μ–΄ μκ±°λ‚ λ„¤νΈμ›ν¬κ°€ λ‹¨μ λ κ²½μ°, μ—°κ²° μμ²΄κ°€ λ¶κ°€λ¥ν•λ―€λ΅ λ°μƒν•λ” νƒ€μ„μ•„μ›ƒμ΄λ‹¤.

***

## Socket Timeout?

μ„λ²„μ™€μ μ—°κ²°μ΄ μ΄λ―Έ μ™„λ£λ μ΄ν›„, λ°μ΄ν„°λ¥Ό μ£Όκ³ λ°›λ” μ¤‘μ— λ°μƒν•  μ μλ” νƒ€μ„μ•„μ›ƒμ΄λ‹¤.\
ν΄λΌμ΄μ–ΈνΈλ” μ„λ²„λ΅λ¶€ν„° λ°μ΄ν„°λ¥Ό μ¤νΈλ¦¬λ° λ°›λ” ν•νƒλ΅ μ „λ‹¬λ°›λ”λ°, \
μ΄λ• ν¨ν‚· λ‹¨μ„λ΅ λ°μ΄ν„°κ°€ λ„μ°©ν•λ‹¤.

`Socket Timeout`μ€ **κ° ν¨ν‚· κ°„μ μ‹κ°„ κ°„κ²©**μ΄ μΌμ • μ‹κ°„ μ΄μƒ μ§€μ—°λ  λ• λ°μƒν•λ‹¤.\
μ„λ²„κ°€ λ‹¤μ λ°μ΄ν„°λ¥Ό λ³΄λ‚΄μ§€ μ•κ±°λ‚, μ „μ†΅μ΄ μ§€μ—°λλ” κ²½μ° ν΄λΌμ΄μ–ΈνΈλ” νƒ€μ„μ•„μ›ƒμ„ λ°μƒμ‹ν‚¤κ³  μ—°κ²°μ„ μΆ…λ£ν•  μ μλ‹¤.

***

## Read Timeout?

μ„λ²„μ™€ μ—°κ²°μ΄ μ„±λ¦½λ μ΄ν›„, λ°μ΄ν„°λ¥Ό μ½μ–΄λ“¤μ΄λ” κ³Όμ •μ—μ„ μΌμ • μ‹κ°„ λ™μ• \
μ•„λ¬΄ λ°μ΄ν„°λ„ λ„μ°©ν•μ§€ μ•μΌλ©΄ λ°μƒν•λ” νƒ€μ„μ•„μ›ƒμ΄λ‹¤.\
μλ¥Ό λ“¤μ–΄, μ‘λ‹µ μ§€μ—°μ΄ μ‹¬ν• μ™Έλ¶€ APIλ¥Ό νΈμ¶ν–λ”λ° μ„λ²„κ°€ μ•„λ¬΄ μ‘λ‹µλ„ ν•μ§€ μ•λ”λ‹¤λ©΄, \
`Read Timeout`μ΄ λ°μƒν•  μ μλ‹¤.

> λ‹¨μν μ—°κ²°λ§ λμ–΄ μλ‹¤κ³  λ¨λ“  κ² λμ΄ μ•„λ‹λ©°, μ‘λ‹µμ„ μ •μƒμ μΌλ΅ λ°›μ•„μ•Ό λΉ„λ΅μ† ν†µμ‹ μ΄ μ ν¨ν• κ²ƒμ΄λ‹¤.

***

## Why is Timeout Important?

νƒ€μ„μ•„μ›ƒμ€ **μ„λ²„ μμ›μ λ‚­λΉ„λ¥Ό λ§‰κΈ° μ„ν•΄ κΌ­ ν•„μ”ν•λ‹¤.**

μλ¥Ό λ“¤μ–΄, μ™Έλ¶€ API μ”μ²­μ΄ λ¬΄ν•μ • μ§€μ—°λλ‹¤λ©΄ ν•΄λ‹Ή μ”μ²­μ„ μ²λ¦¬ν•κ³  μλ” μ“°λ λ“λ‚ μ»¤λ„¥μ…μ„ κ³„μ† μ μ§€ν•΄μ•Ό ν•λ‹¤.\
μ΄λ” μμ›μ κ³ κ°μ„ μ΄λν•λ©°, λ€κΈ° μ¤‘μΈ λ‹¤λ¥Έ μ”μ²­μ„ μ²λ¦¬ν•μ§€ λ»ν•κ² λμ–΄ μ„λΉ„μ¤ μ „μ²΄μ— μ¥μ• λ¥Ό μΌμΌν‚¬ μ μλ‹¤.

> μ„¤μ •λ νƒ€μ„μ•„μ›ƒμ€ μ„λΉ„μ¤κ°€ **μκΈ° μμ‹ μ„ λ³΄νΈ**ν•λ” ν•λ‚μ μ•μ „μ¥μΉμ΄λ‹¤.

***

## How to Test Timeout?

νƒ€μ„μ•„μ›ƒμ€ ν…μ¤νΈ ν™κ²½μ—μ„ λ‹¤μκ³Ό κ°™μ€ λ°©μ‹μΌλ΅ κ²€μ¦ν•  μ μλ‹¤:

1. **κ°€μ§ API μ„λ²„λ¥Ό κµ¬μ„±**ν•μ—¬ μΌμ • μ‹κ°„ λ™μ• μ‘λ‹µμ„ μ§€μ—°μ‹ν‚¨λ‹¤.
2. μ„λ²„ μ‚¬μ΄λ“μ—μ„ `Thread.sleep()`μ„ ν™μ©ν•΄ μΌλ¶€λ¬ λλ¦¬κ² μ‘λ‹µν•λ‹¤.
3. Nginx λ“± ν”„λ΅μ‹ λ λ²¨μ—μ„ μ§€μ—°μ„ μΈμ„μ μΌλ΅ μ£Όλ” λ°©μ‹λ„ κ°€λ¥ν•λ‹¤.

```java
@RestController
public class TestController {
    @GetMapping("/delay")
    public String delay() throws InterruptedException {
        Thread.sleep(50000); // 50μ΄ μ§€μ—°
        return "done";
    }
}
```

μ΄λ° μ‹μΌλ΅ μ‘λ‹µ μ§€μ—°μ„ μ λ„ν•μ—¬ `connectionTimeout`, `readTimeout`, `socketTimeout` \
μ„¤μ •μ„ μ μ©ν–μ„ λ• μ–΄λ–»κ² λ™μ‘ν•λ”μ§€ ν™•μΈν•  μ μλ‹¤.

***

## Is Timeout Testing Always Necessary?

λ°λ“μ‹ ν…μ¤νΈν•΄μ•Ό ν•λ‹¤κ³  λ‹¨μ •ν•  μλ” μ—†λ‹¤.\
νƒ€μ„μ•„μ›ƒ ν…μ¤νΈλ” μ‹ μ¤‘ν•κ² μ ‘κ·Όν•  ν•„μ”κ°€ μλ‹¤.

* μ–»μ„ μ μλ” κ²ƒ: **μ •μƒμ μΈ μμ™Έ μ²λ¦¬ λ΅μ§ ν™•μΈ**, μ„λΉ„μ¤ νλ³µλ ¥ ν™•λ³΄
* μƒλ” κ²ƒ: **ν…μ¤νΈ μ‹κ°„ μ¦κ°€**, μλ™ν™”λ ν…μ¤νΈμ μ†λ„ μ €ν•, ν…μ¤νΈ ν™κ²½ κµ¬μ„± λΉ„μ©

λ”°λΌμ„, μ‹¤μ λ΅ νƒ€μ„μ•„μ›ƒμ΄ μ¤‘μ”ν• κ²½λ΅(API, DB, μ™Έλ¶€ μ—°λ™)λΌλ©΄ κΌ­ ν…μ¤νΈν•΄λ³΄λ” κ²ƒμ΄ μΆ‹κ³ ,\
λ‹¨μν• λ‚΄λ¶€ μ—°λ™μ΄κ±°λ‚ νƒ€μ„μ•„μ›ƒ λ°μƒ κ°€λ¥μ„±μ΄ κ±°μ μ—†λ‹¤λ©΄ κµ³μ΄ λ¬΄λ¦¬ν•΄μ„ ν…μ¤νΈν•μ§€ μ•μ•„λ„ λλ‹¤.

~~μ‚¬μ‹¤ μΌμ •μ— λ§μ¶° κ°λ°ν•λ‹¤λ³΄λ©΄ νƒ€μ„μ•„μ›ƒ ν…μ¤νΈκΉμ§€ μ§„ν–‰ ν•  μ—¬μ λ„ μ—†λ‹¤...γ…γ…~~

> κ²°κµ­
>
> **"ν…μ¤νΈλ΅ μΈν• λΉ„μ©κ³Ό ν…μ¤νΈλ¥Ό μ• ν–μ„ λ•μ μ„ν— μ¤‘ μ–΄λ μ½μ΄ λ” ν°κ°€?"**\
> μ΄ νλ‹¨μ΄ νƒ€μ„μ•„μ›ƒ ν…μ¤νΈμ ν•µμ‹¬μ΄λ‹¤.
