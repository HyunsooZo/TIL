# π Infra : Load Balancing

## Load Balancing?

λ΅λ“ λ°Έλ°μ‹±μ΄λ€ ν•λ‚μ μ• ν”λ¦¬μΌ€μ΄μ… λλ” μ‹μ¤ν…μ— λ“¤μ–΄μ¤λ” λ„¤νΈμ›ν¬ μ”μ²­μ„ \
μ—¬λ¬ μ„λ²„(λ¦¬μ†μ¤ ν’€)μ— κ· λ“±ν•κ² λ¶„μ‚°μ‹ν‚¤λ” κΈ°μ μ„ μλ―Έν•λ‹¤.

λ΅λ“ λ°Έλ°μ„λ” λ³΄ν†µ μ„λ²„ μ•λ‹¨(Frontend)μ— μ„μΉν•λ©°, ν΄λΌμ΄μ–ΈνΈμ μ”μ²­μ„ λ°›μ•„ μ μ ν• μ„λ²„λ΅ μ „λ‹¬ν•λ‹¤. \
μ΄λ¥Ό ν†µν•΄ λ‹¤μκ³Ό κ°™μ€ ν¨κ³Όλ¥Ό μ–»μ„ μ μλ‹¤

* κ³ κ°€μ©μ„±(High Availability)
* ν™•μ¥μ„±(Scalability)
* μ„±λ¥ ν–¥μƒ(Performance)
* λ³΄μ•(Security)

***

## Load Balancing Algorithms

λ‹¤μ–‘ν• λ΅λ“ λ°Έλ°μ‹± μ•κ³ λ¦¬μ¦μ΄ μ΅΄μ¬ν•λ©°, κ°κ°μ λ©μ κ³Ό μƒν™©μ— λ”°λΌ μ„ νƒμ΄ λ‹¬λΌμ§„λ‹¤.

### **1. Round Robin**

ν„μ—…μ—μ„ κ°€μ¥ ν”ν μ‚¬μ©λλ” μ•κ³ λ¦¬μ¦μ΄λ‹¤. μ°λ¦¬νμ‚¬λ„ ν•΄λ‹Ή μ•κ³ λ¦¬μ¦μ„ μ‚¬μ©ν•λ” κ²ƒμΌλ΅ μ•κ³ μλ‹¤.

λ¨λ“  μ”μ²­μ„ μμ„λ€λ΅ μ„λ²„μ— λ¶„μ‚°ν•λ‹¤. μ: A β†’ B β†’ C β†’ A β†’ ...

* μ¥μ : κµ¬ν„μ΄ λ‹¨μν•κ³  κ³ λ¥Έ λ¶„μ‚°
* λ‹¨μ : μ„λ²„μ λ¶€ν• μƒνƒλ‚ μ²λ¦¬ λ¥λ ¥μ„ κ³ λ ¤ν•μ§€ μ•μ

<figure><img src="../../.gitbook/assets/α„‰α…³α„α…³α„…α…µα†«α„‰α…£α†Ί 2025-05-07 23.32.51.png" alt=""><figcaption></figcaption></figure>

***

### **2. Weighted Round Robin**

κ° μ„λ²„μ— κ°€μ¤‘μΉ(weight)λ¥Ό λ¶€μ—¬ν•μ—¬ μ²λ¦¬ λ¥λ ¥μ΄ λ†’μ€ μ„λ²„μ— λ” λ§μ€ μ”μ²­μ„ μ „λ‹¬ν•λ‹¤.

* μ¥μ : ν„μ‹¤μ μΈ λ¶€ν• λ¶„μ‚° κ°€λ¥
* λ‹¨μ : μ‹¤μ‹κ°„ μ„λ²„ μƒνƒλ” κ³ λ ¤ν•μ§€ μ•μ

<figure><img src="../../.gitbook/assets/α„‰α…³α„α…³α„…α…µα†«α„‰α…£α†Ί 2025-05-07 23.33.18.png" alt=""><figcaption></figcaption></figure>

***

### **3. Least Connections**

ν„μ¬ ν™μ„± μ—°κ²° μκ°€ κ°€μ¥ μ μ€ μ„λ²„λ΅ μ”μ²­μ„ μ „λ‹¬ν•λ‹¤.

* μ¥μ : μ—°κ²° μ κΈ°λ° λ¶„μ‚°
* λ‹¨μ : μ„λ²„ μ„±λ¥ μ°¨μ΄λ” κ³ λ ¤ν•μ§€ μ•μ

<figure><img src="../../.gitbook/assets/α„‰α…³α„α…³α„…α…µα†«α„‰α…£α†Ί 2025-05-07 23.33.45.png" alt=""><figcaption></figcaption></figure>

***

### **4. Weighted Least Connections**

Least Connections λ°©μ‹μ— κ°€μ¤‘μΉ κ°λ…μ„ κ²°ν•©ν• λ°©μ‹.

* μ¥μ : μ„±λ¥κ³Ό μ—°κ²° μλ¥Ό λ¨λ‘ κ³ λ ¤
* λ‹¨μ : κµ¬ν„ λ³µμ΅λ„ μ¦κ°€

<figure><img src="../../.gitbook/assets/α„‰α…³α„α…³α„…α…µα†«α„‰α…£α†Ί 2025-05-07 23.34.49.png" alt=""><figcaption></figcaption></figure>

***

### **5. Least Response Time**

μ„λ²„μ ν‰κ·  μ‘λ‹µ μ‹κ°„μ„ κΈ°μ¤€μΌλ΅ κ°€μ¥ λΉ λ¥Έ μ„λ²„λ΅ μ”μ²­μ„ μ „λ‹¬ν•λ‹¤.

* μ¥μ : μ‚¬μ©μ μ‘λ‹µ μ†λ„ μµμ ν™”
* λ‹¨μ : μ‘λ‹µ μ‹κ°„ μΈ΅μ • λΉ„μ© λ°μƒ

<figure><img src="../../.gitbook/assets/α„‰α…³α„α…³α„…α…µα†«α„‰α…£α†Ί 2025-05-07 23.35.17.png" alt=""><figcaption></figcaption></figure>

***

### **6. IP Hash**

ν΄λΌμ΄μ–ΈνΈ IPλ¥Ό ν•΄μ‹±ν•μ—¬ κ³ μ •λ μ„λ²„μ— μ”μ²­μ„ μ „λ‹¬ν•λ‹¤.

* μ¥μ : μ„Έμ… μ μ§€μ— μ λ¦¬
* λ‹¨μ : λ¶€ν• λ¶„μ‚°μ΄ κ³ λ¥΄μ§€ μ•μ„ μ μμ

<figure><img src="../../.gitbook/assets/α„‰α…³α„α…³α„…α…µα†«α„‰α…£α†Ί 2025-05-07 23.35.45.png" alt=""><figcaption></figcaption></figure>

***

## Forward Proxy vs Reverse Proxy vs Load Balancer

<table><thead><tr><th width="158.8671875">μΆ…λ¥</th><th width="363.109375">μ„¤λ…</th><th>μ„μΉ</th></tr></thead><tbody><tr><td>Forward Proxy</td><td>ν΄λΌμ΄μ–ΈνΈκ°€ μ”μ²­μ„ λ³΄λ‚Ό λ• ν”„λ΅μ‹κ°€ λ€μ‹  μ”μ²­</td><td>ν΄λΌμ΄μ–ΈνΈ μ•λ‹¨</td></tr><tr><td>Reverse Proxy</td><td>ν΄λΌμ΄μ–ΈνΈ μ”μ²­μ„ λ°›μ•„ μ„λ²„λ΅ λ€μ‹  μ „λ‹¬</td><td>μ„λ²„ μ•λ‹¨</td></tr><tr><td>Load Balancer</td><td>Reverse Proxy μ¤‘ ν•λ‚, νΈλν”½μ„ μ—¬λ¬ μ„λ²„μ— λ¶„μ‚°</td><td>μ„λ²„ μ•λ‹¨</td></tr></tbody></table>

***

## When to Use Load Balancing?

* νΈλν”½ μ¦κ°€μ— μ μ—°ν•κ² λ€μ‘ν•κ³  μ‹¶μ„ λ•
* λ¬΄μ¤‘λ‹¨ λ°°ν¬(Blue-Green, Canary)λ¥Ό κ³ λ ¤ν•  λ•
* μ¥μ•  λ€λΉ„ μλ™ Failoverκ°€ ν•„μ”ν•  λ•
