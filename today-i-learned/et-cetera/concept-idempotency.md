---
description: >-
  λ©±λ“±μ„±(Idempotency)μ΄λ€ κ°™μ€ μ—°μ‚°μ„ μ—¬λ¬ λ² μν–‰ν•΄λ„ κ²°κ³Όκ°€ λ³€ν•μ§€ μ•λ” μ„±μ§μ„ μλ―Έν•λ‹¤.  μ¦‰, λ™μΌν• μ”μ²­μ„ μ—¬λ¬ λ²
  λ³΄λ‚΄λ”λΌλ„ μ‹μ¤ν…μ μƒνƒλ‚ μ‘λ‹µμ΄ λ³€ν•μ§€ μ•λ” νΉμ„±μ„ κ°€μ§„λ‹¤.
---

# π‘† Concept : Idempotency

## Why Idempotency Matters ?

### μ•μ •μ μΈ API μ„¤κ³„

λ„¤νΈμ›ν¬ μ¥μ• λ΅ μΈν•΄ λ™μΌν• μ”μ²­μ΄ μ¤‘λ³µ μ „μ†΅λ  μ μλ‹¤. \
λ©±λ“±μ„±μ„ μ μ©ν•λ©΄ μ΄λ¬ν• μƒν™©μ—μ„λ„ λ°μ΄ν„° λ¬΄κ²°μ„±μ„ λ³΄μ¥ν•  μ μλ‹¤.

### νΈλμ­μ… λ³΄μ¥

λ¶„μ‚° μ‹μ¤ν…μ—μ„λ” λ™μΌν• μ”μ²­μ΄ μ—¬λ¬ λ² μ²λ¦¬λ  κ°€λ¥μ„±μ΄ λ†’λ‹¤. \
λ©±λ“±μ„±μ΄ μ μ©λλ©΄ μ¤‘λ³µ μ‹¤ν–‰μ΄ λλ”λΌλ„ λ°μ΄ν„°κ°€ μΌκ΄€λ μƒνƒλ¥Ό μ μ§€ν•λ‹¤.

### μ¥μ•  λ³µκµ¬

μ¥μ•  λ°μƒ ν›„ μ¬μ‹λ„ λ΅μ§μ„ κµ¬ν„ν•  λ•, λ©±λ“±μ„±μ΄ μ—†λ‹¤λ©΄ μ¤‘λ³µ λ°μ΄ν„°κ°€ λ°μƒν•  μ μλ‹¤. \
μ΄λ¥Ό λ°©μ§€ν•κΈ° μ„ν•΄ λ©±λ“±μ„±μ΄ ν•„μ”ν•λ‹¤.

## Idempotency in HTTP Methods

<table data-header-hidden><thead><tr><th width="128"></th><th width="122"></th><th></th></tr></thead><tbody><tr><td><strong>Method</strong></td><td><strong>Idempotent</strong></td><td><strong>Description</strong></td></tr><tr><td><strong>GET</strong></td><td>β… Yes</td><td>λ™μΌν• μ”μ²­μ„ μ—¬λ¬ λ² ν•΄λ„ κ°™μ€ μ‘λ‹µμ„ λ°›μ</td></tr><tr><td><strong>PUT</strong></td><td>β… Yes</td><td>κ°™μ€ λ°μ΄ν„°λ¥Ό μ—¬λ¬ λ² μ—…λ°μ΄νΈν•΄λ„ κ²°κ³Όλ” λ™μΌ</td></tr><tr><td><strong>DELETE</strong></td><td>β… Yes</td><td>κ°™μ€ λ¦¬μ†μ¤λ¥Ό μ—¬λ¬ λ² μ‚­μ  μ”μ²­ν•΄λ„ κ²°κ³Όλ” λ™μΌ</td></tr><tr><td><strong>POST</strong></td><td>β No</td><td>μƒ λ¦¬μ†μ¤ μƒμ„±μ κ²½μ° μ¤‘λ³µ μ”μ²­μ΄ λ°μƒν•λ©΄ λ°μ΄ν„°κ°€ μ¤‘λ³µ μƒμ„±λ  μ μμ</td></tr><tr><td><strong>PATCH</strong></td><td>β No</td><td>λ¶€λ¶„ μμ • μ”μ²­μ΄λ―€λ΅, μ¤‘λ³µ μ”μ²­ μ‹ μƒνƒκ°€ κ³„μ† λ³€ν•  μ μμ</td></tr></tbody></table>

## How to Ensure Idempotency

### Idempotency Key μ‚¬μ©

ν΄λΌμ΄μ–ΈνΈκ°€ μ”μ²­λ§λ‹¤ **κ³ μ ν• ID**λ¥Ό ν¬ν•¨ν•λ©΄ μ„λ²„μ—μ„ μ¤‘λ³µ μ”μ²­μ„ λ°©μ§€ν•  μ μλ‹¤.

```json
POST /payments
Content-Type: application/json
Idempotency-Key: 123456789abcdef

{
  "user_id": "1001",
  "amount": 50000,
  "currency": "KRW"
}
```

μ„λ²„λ” `Idempotency-Key`λ¥Ό μ €μ¥ν•κ³  λ™μΌν• ν‚¤λ΅ μ”μ²­μ΄ μ¤λ©΄ κΈ°μ΅΄ μ‘λ‹µμ„ λ°ν™ν•μ—¬ μ¤‘λ³µ μ²λ¦¬λ¥Ό λ°©μ§€ν•λ‹¤.

### μƒνƒ κΈ°λ° μ²λ¦¬

* **λ¦¬μ†μ¤κ°€ μ΄λ―Έ μ΅΄μ¬ν•λ”μ§€ ν™•μΈ ν›„ μ—…λ°μ΄νΈλ§ μν–‰**
* μλ¥Ό λ“¤μ–΄, μ£Όλ¬Έ μƒμ„± APIμ—μ„ κ°™μ€ `order_id`κ°€ μ΄λ―Έ μ΅΄μ¬ν•λ©΄ μƒλ΅ μƒμ„±ν•μ§€ μ•κ³  κΈ°μ΅΄ λ°μ΄ν„°λ¥Ό λ°ν™

### νΈλμ­μ… ν™μ©

* μ¤‘λ³µ μ”μ²­ μ‹ λ™μΌν• νΈλμ­μ…μ„ κ°μ§€ν•μ—¬ λ΅¤λ°±ν•κ±°λ‚ λ¬΄μ‹ν•λ” λ°©μ‹ μ μ©

## Use Cases

### κ²°μ  μ‹μ¤ν…

* λ™μΌν• κ²°μ  μ”μ²­μ΄ μ—¬λ¬ λ² μ²λ¦¬λμ§€ μ•λ„λ΅ λ³΄μ¥
* Idempotency Keyλ¥Ό ν™μ©ν•μ—¬ μ¤‘λ³µ κ²°μ λ¥Ό λ°©μ§€

### μƒν’ μ£Όλ¬Έ API

* κ°™μ€ μ£Όλ¬Έμ΄ μ—¬λ¬ λ² λ“±λ΅λμ§€ μ•λ„λ΅ λ°©μ§€

### κ³„μΆ μ΄μ²΄

* λ™μΌν• μ΄μ²΄ μ”μ²­μ΄ λ°λ³µλμ§€ μ•λ„λ΅ λ°©μ–΄ λ΅μ§ μ μ©

## Flow (Idempotency-Key μ‚¬μ© μ‹)

<figure><img src="../../.gitbook/assets/α„‰α…³α„α…³α„…α…µα†«α„‰α…£α†Ί 2025-02-12 α„‹α…©α„’α…® 8.20.43.png" alt=""><figcaption></figcaption></figure>

## Conclusion

* λ©±λ“±μ„±μ΄λ€ κ°™μ€ μ”μ²­μ„ μ—¬λ¬ λ² μν–‰ν•΄λ„ κ²°κ³Όκ°€ λ³€ν•μ§€ μ•λ” μ„±μ§μ΄λ‹¤.
* `GET`, `PUT`, `DELETE`λ” λ©±λ“±μ„±μ„ κ°€μ§€μ§€λ§ `POST`, `PATCH`λ” λ©±λ“±μ„±μ΄ μ—†λ‹¤.
* Idempotency Key, μƒνƒ κΈ°λ° μ²λ¦¬, νΈλμ­μ… λ³΄μƒμ„ ν™μ©ν•λ©΄ λ©±λ“±μ„±μ„ λ³΄μ¥ν•  μ μλ‹¤.
* κ²°μ , μ£Όλ¬Έ, κ³„μΆ μ΄μ²΄ λ“±μ μ‹μ¤ν…μ—μ„ λ©±λ“±μ„±μ΄ ν•„μμ μ΄λ‹¤.
* μ „ μ§μ¥ λ™λ£μ μ½”λ“ λ¦¬λ·° λ•λ¬Έμ— μ°Ύμ•„λ³Έ κ°λ…. μ•μΌλ΅ λ©±λ“±μ„±μ„ μ—Όλ‘ν•κ³  μ„¤κ³„ν•λ” μµκ΄€μ„ κ°€μ Έμ•Όκ² λ‹¤.
