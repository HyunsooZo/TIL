# ğŸ›¡ï¸ Java : Defensive Copy

## Defensive Copy?

ë°©ì–´ì  ë³µì‚¬(defensive copy)ëŠ” ê°ì²´ì˜ ë¶ˆë³€ì„±ì„ ë³´ì¥í•˜ê±°ë‚˜ ì™¸ë¶€ë¡œë¶€í„°ì˜ ì˜ˆìƒì¹˜ ëª»í•œ ë³€ê²½ì„ ë§‰ê¸° ìœ„í•´, \
ê°ì²´ë‚˜ ì»¬ë ‰ì…˜ì„ ë³µì‚¬í•˜ì—¬ ì‚¬ìš©í•˜ëŠ” í”„ë¡œê·¸ë˜ë° ê¸°ë²•ì´ë‹¤. \
íŠ¹íˆ Javaì—ì„œëŠ” ì»¬ë ‰ì…˜, ë°°ì—´, Date ê°™ì€ mutable ê°ì²´ë¥¼ ë¦¬í„´í•˜ê±°ë‚˜ íŒŒë¼ë¯¸í„°ë¡œ ë°›ì„ ë•Œ ìì£¼ ì‚¬ìš©ëœë‹¤.

## Why is Defensive Copy Important?

ë°©ì–´ì  ë³µì‚¬ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šìœ¼ë©´ ì™¸ë¶€ì—ì„œ ê°ì²´ì˜ ë‚´ë¶€ ìƒíƒœë¥¼ ë³€ê²½í•  ìˆ˜ ìˆë‹¤. \
ì´ëŠ” ì˜ë„í•˜ì§€ ì•Šì€ ë¶€ì‘ìš©ì„ ì´ˆë˜í•  ìˆ˜ ìˆìœ¼ë©°, ì‹œìŠ¤í…œì˜ ì•ˆì •ì„±ê³¼ ì˜ˆì¸¡ ê°€ëŠ¥ì„±ì„ í•´ì¹œë‹¤.

## Common Use Cases

1. **Getter ë©”ì„œë“œì—ì„œ ë°©ì–´ì  ë³µì‚¬**
2. **ìƒì„±ìë‚˜ setterì—ì„œ ì™¸ë¶€ ì…ë ¥ì— ëŒ€í•´ ë°©ì–´ì  ë³µì‚¬**

### &#x20;Without Defensive Copy

```java
public class Person {
    private Date birthDate;

    public Person(Date birthDate) {
        this.birthDate = birthDate; // ìœ„í—˜í•¨!
    }

    public Date getBirthDate() {
        return birthDate; // ìœ„í—˜í•¨!
    }
}
```

ì™¸ë¶€ ì½”ë“œì—ì„œ `getBirthDate()`ë¡œ ë°›ì€ ê°ì²´ë¥¼ ìˆ˜ì •í•˜ë©´ `Person` ì¸ìŠ¤í„´ìŠ¤ ë‚´ë¶€ì˜ ìƒíƒœë„ ë³€í•œë‹¤.

### With Defensive Copy

```java
public class Person {
    private Date birthDate;

    public Person(Date birthDate) {
        this.birthDate = new Date(birthDate.getTime()); // ë°©ì–´ì  ë³µì‚¬
    }

    public Date getBirthDate() {
        return new Date(birthDate.getTime()); // ë°©ì–´ì  ë³µì‚¬
    }
}
```

ì´ë ‡ê²Œ í•˜ë©´ ì™¸ë¶€ì—ì„œ ì›ë³¸ ê°ì²´ì— ì ‘ê·¼í•˜ê±°ë‚˜ ìˆ˜ì •í•  ìˆ˜ ì—†ë‹¤.

## When to Use

* í´ë˜ìŠ¤ ë‚´ë¶€ í•„ë“œê°€ mutableí•œ ê°ì²´ì¸ ê²½ìš° (ì˜ˆ: ë°°ì—´, `Date`, `List`, ì»¤ìŠ¤í…€ mutable ê°ì²´)
* ì™¸ë¶€ì—ì„œ ê°ì²´ë¥¼ ì „ë‹¬ë°›ê±°ë‚˜ ë°˜í™˜í•  ë•Œ, ê·¸ ê°ì²´ì˜ ë‚´ë¶€ ìƒíƒœ ë³´í˜¸ê°€ ì¤‘ìš”í•œ ê²½ìš°

## Conclusion

Javaì—ì„œ ë°©ì–´ì  ë³µì‚¬ëŠ” **ë¶ˆë³€ì„± ë³´ì¥**, **ì‚¬ì´ë“œ ì´í™íŠ¸ ë°©ì§€**, **ê°ì²´ ìº¡ìŠí™” ìœ ì§€**ë¥¼ ìœ„í•´ í•„ìˆ˜ì ì¸ íŒ¨í„´ì´ë‹¤.\
íŠ¹íˆ ê°ì²´ê°€ mutableí•˜ë‹¤ë©´ ë°©ì–´ì  ë³µì‚¬ë¥¼ í†µí•´ ë°ì´í„° ì¼ê´€ì„±ì„ ìœ ì§€í•  ìˆ˜ ìˆë‹¤.
