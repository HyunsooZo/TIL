---
description: JdbcClientμ— λ€ν• κ°„λ‹¨ν• μ†κ° λ° μ‚¬μ©λ²•μ„ μ •λ¦¬ν•΄ λ³΄μ•λ‹¤.
---

# π“‘ Spring : JdbcClient

## Spring 6.1: `JdbcClient` μ†κ° λ° ν™μ©

Spring 6.1μ—μ„λ” μƒλ΅μ΄ λ°μ΄ν„°λ² μ΄μ¤ μ ‘κ·Ό λ°©μ‹μ„ μ κ³µν•λ” `JdbcClient`κ°€ λ„μ…λμ—λ‹¤. \
κΈ°μ΅΄μ `JdbcTemplate`μ™€ λΉ„μ·ν• λ°©μ‹μΌλ΅ μ‘λ™ν•μ§€λ§, λ” κ°„κ²°ν• APIμ™€ Java 8 μ΄ν›„ μ¶”κ°€λ κΈ°λ¥λ“¤μ„ \
μμ—°μ¤λ½κ² ν™μ©ν•  μ μλ„λ΅ μ„¤κ³„λμ—λ‹¤. \
νΉν, λ¦¬μ•΅ν‹°λΈν•μ§€ μ•μΌλ©΄μ„λ„ ν¨μ¨μ μ΄κ³  κ°„λ‹¨ν•κ² λ°μ΄ν„°λ² μ΄μ¤ μ‘μ—…μ„ μ²λ¦¬ν•  λ• ν¨κ³Όμ μ΄λ‹¤.

### **1. `JdbcClient`λ€?**

`JdbcClient`λ” `JdbcTemplate`μ„ κ°μ„ ν• ν•νƒλ΅, SQL λ¬Έμ„ μ‹¤ν–‰ν•κ³ , κ²°κ³Όλ¥Ό λ§¤ν•‘ν•λ” κ³Όμ •μ„ λ” μ§κ΄€μ μ΄κ³  μ‰½κ² μν–‰ν•  μ μκ² ν•΄μ¤€λ‹¤. λν•, λ©”μ„λ“ μ²΄μ΄λ‹μ„ ν†µν•΄ SQL μ‹¤ν–‰ νλ¦„μ„ λ³΄λ‹¤ κ°„κ²°ν•κ² ν‘ν„ν•  μ μμΌλ©°, κ²°κ³Ό λ§¤ν•‘μ„ μ„ν• κΈ°λ¥λ„ κ°•ν™”λμ—λ‹¤.

### **2. μ„¤μ • λ° μμ΅΄μ„± μ¶”κ°€**

`JdbcClient`λ¥Ό μ‚¬μ©ν•λ ¤λ©΄ Spring 6.1 μ΄μƒμ λ²„μ „μ—μ„ μ‚¬μ©ν•  μ μμΌλ©°, Spring Boot ν”„λ΅μ νΈμ—μ„λ” λ‹¤μκ³Ό κ°™μ€ μμ΅΄μ„±μ„ μ¶”κ°€ν•λ©΄ λλ‹¤.

```groovy
dependencies {
    implementation 'org.springframework.boot:spring-boot-starter-data-jdbc'
}
```

### **3. `JdbcClient` κΈ°λ³Έ μ‚¬μ©λ²•**

* `sql(String)` : SQL λ¬Έμ„ μ •μν•λ‹¤.
* `param(String, Object)` : SQLμ— μ‚¬μ©ν•  νλΌλ―Έν„°λ¥Ό μ •μν•λ‹¤.
* `fetch()` : λ°μ΄ν„°λ¥Ό μ΅°νν•λ‹¤.
* `update()` : λ°μ΄ν„°λ¥Ό μμ •ν•κ±°λ‚ μ‚½μ…ν•  λ• μ‚¬μ©ν•λ‹¤.

```java
@Autowired
private JdbcClient jdbcClient;

public List<User> findAllUsers() {
    return jdbcClient.sql("SELECT * FROM users")
                     .fetch()
                     .list((rs, rowNum) -> new User(
                         rs.getLong("id"),
                         rs.getString("name"),
                         rs.getString("email")
                     ));
}
```

μ„ μ½”λ“λ” SQL λ¬Έμ„ μ‘μ„±ν•κ³  κ²°κ³Όλ¥Ό `User` κ°μ²΄λ΅ λ§¤ν•‘ν•λ” κ°„λ‹¨ν• κ³Όμ •μ΄λ‹¤. \
`JdbcTemplate`κ³Ό λΉ„κµν•λ©΄μ½”λ“κ°€ ν›¨μ”¬ κ°„κ²°ν•΄μ§„ κ²ƒμ„ λ³Ό μ μλ‹¤.

### **4. νλΌλ―Έν„° λ°”μΈλ”©**

SQL μΏΌλ¦¬μ—μ„ νλΌλ―Έν„°λ¥Ό λ™μ μΌλ΅ μ „λ‹¬ν•  λ•λ” `param` λ©”μ„λ“λ¥Ό μ‚¬μ©ν•  μ μλ‹¤.

```java
public User findUserById(Long id) {
    return jdbcClient.sql("SELECT * FROM users WHERE id = :id")
                     .param("id", id)
                     .fetch()
                     .one((rs, rowNum) -> new User(
                         rs.getLong("id"),
                         rs.getString("name"),
                         rs.getString("email")
                     ));
}
```

### **5. λ°μ΄ν„° μ‚½μ… λ° μμ •**

λ°μ΄ν„° μ‚½μ…μ΄λ‚ μμ •μ„ μ„ν• μΏΌλ¦¬λ„ λ§¤μ° μ§κ΄€μ μ΄λ‹¤.&#x20;

```java
public int insertUser(User user) {
    return jdbcClient.sql("INSERT INTO users (name, email) VALUES (:name, :email)")
                     .param("name", user.getName())
                     .param("email", user.getEmail())
                     .update();
}
```

`update()`λ” λ°μ΄ν„°λ² μ΄μ¤μ—μ„ μμ •λ ν–‰μ μλ¥Ό λ°ν™ν•λ‹¤.

### **6. νΈλμ­μ… κ΄€λ¦¬**

`JdbcClient`λ” νΈλμ­μ…κ³Ό ν•¨κ» μ‚¬μ©ν•  μ μλ‹¤. \
Springμ `@Transactional` μ• λ„ν…μ΄μ…μ„ ν™μ©ν•λ©΄ μ‰½κ² νΈλμ­μ…μ„ μ μ©ν•  μ μλ‹¤.

```java
@Transactional
public void updateUserEmail(Long id, String newEmail) {
    jdbcClient.sql("UPDATE users SET email = :email WHERE id = :id")
              .param("email", newEmail)
              .param("id", id)
              .update();
}
```

### **7. μ”μ•½**

Spring 6.1μ `JdbcClient`λ” `JdbcTemplate`λ³΄λ‹¤ λ” κ°„κ²°ν•κ³  μ§κ΄€μ μΈ APIλ¥Ό μ κ³µν•λ‹¤. SQL μΏΌλ¦¬ μ‘μ„± λ° νλΌλ―Έν„° λ°”μΈλ”©, κ²°κ³Ό λ§¤ν•‘ κ³Όμ •μ΄ λ¨λ‘ κ°„μ†ν™”λμ–΄ κ°λ°μλ“¤μ΄ λ” μ‰½κ² λ°μ΄ν„°λ² μ΄μ¤ μ‘μ—…μ„ μ²λ¦¬ν•  μ μλ„λ΅ λ„μ™€μ¤€λ‹¤.

## `JdbcClient`μ™€ `QueryDSL` λΉ„κµ

λ‚λ” μ£Όλ΅ JPAμ™€ `QueryDSL`μ„ μ‚¬μ©ν•λ” νΈμ΄μ—λ”λ°, \
μ‹¤μ λ΅ μ‚¬μ©ν•΄λ³΄λ‹ `JdbcClient`κ°€ ν›¨μ”¬ μ‚¬μ©ν•κΈ° νΈν•κ³  μ§κ΄€μ μΌλ΅ λ‹¤κ°€μ™”λ‹¤. \
λν•, μ™Έκµ­ κ°λ°μ μ»¤λ®¤λ‹ν‹°μ—μ„λ” `QueryDSL`μ΄ "μ£½μ€ ν”„λ΅μ νΈ"λΌλ” κΈ€μ΄ λκ³  μλ‹¤.

μ‹¤μ λ΅ `QueryDSL`μ€ 2024λ…„ κΈ°μ¤€μΌλ΅ λ²„κ·Έ μμ •μ„ μ μ™Έν•λ©΄ \
μ΄λ ‡λ‹¤ ν•  μμ •μ΄λ‚ κ°μ„  μ‚¬ν•­μ΄ μ—†λ” μƒνƒλ‹¤. \
λ€μ²΄μ λ΅ `JOOQ`κ°€ κ±°λ΅ λκΈ°λ„ ν•μ§€λ§, μ‹¤μ λ΅ `JOOQ`λ¥Ό μ‚¬μ©ν•΄λ³Έ μ…μ¥μ—μ„λ” \
`QueryDSL`λ³΄λ‹¤ μ΄λ ‡λ‹¤ ν•  λ‚μ€ μ μ„ λλΌμ§„ λ»ν–λ‹¤.

μ•„λλ” `QueryDSL`κ³Ό `JdbcClient`μ νΉμ§•λ° μ„±λ¥μ„ λΉ„κµν• ν‘λ‹¤.

### \[νΉμ§• λΉ„κµ ν‘]

<table><thead><tr><th width="207">ν•­λ©</th><th>JdbcClient</th><th>QueryDSL</th></tr></thead><tbody><tr><td><strong>μ£Όμ” λ©μ </strong></td><td>SQL κΈ°λ° λ°μ΄ν„°λ² μ΄μ¤ μ‘μ—…μ„ κ°„λ‹¨ν•κ³  μ§κ΄€μ μΌλ΅ μ²λ¦¬</td><td>νƒ€μ… μ•μ „ν• JPQL/HQL μΏΌλ¦¬ μƒμ„± λ° λ™μ  μΏΌλ¦¬ μ§€μ›</td></tr><tr><td><strong>SQL μ‘μ„± λ°©μ‹</strong></td><td>μ§μ ‘ SQL μ‘μ„± (λ¬Έμμ—΄ κΈ°λ°)</td><td>Java μ½”λ“λ΅ μΏΌλ¦¬ μ‘μ„± (νƒ€μ… μ•μ „μ„± λ³΄μ¥)</td></tr><tr><td><strong>λ™μ  μΏΌλ¦¬</strong></td><td>μ ν•μ  (νλΌλ―Έν„° λ°”μΈλ”©μΌλ΅ μ²λ¦¬)</td><td>λ§¤μ° κ°•λ ¥ν•¨. Java λ¬Έλ²•μ„ ν™μ©ν•μ—¬ λ™μ μΌλ΅ μΏΌλ¦¬ μ‘μ„± κ°€λ¥</td></tr><tr><td><strong>νƒ€μ… μ•μ „μ„±</strong></td><td>SQL λ¬Έμμ—΄μ— μμ΅΄ν•μ—¬ μ»΄νμΌ μ‹ νƒ€μ… μ²΄ν¬κ°€ λμ§€ μ•μ</td><td>Java κ°μ²΄μ™€ λ©”μ„λ“ κΈ°λ°μΌλ΅ μ»΄νμΌ μ‹ νƒ€μ… μ•μ „μ„± λ³΄μ¥</td></tr><tr><td><strong>μΏΌλ¦¬ νλΌλ―Έν„° λ°”μΈλ”©</strong></td><td><code>param()</code> λ©”μ„λ“λ¥Ό μ‚¬μ©ν•΄ νλΌλ―Έν„°λ¥Ό λ°”μΈλ”©</td><td><code>BooleanExpression</code> λ“±μ„ μ‚¬μ©ν•΄ νλΌλ―Έν„°λ¥Ό μ•μ „ν•κ² λ°”μΈλ”©</td></tr><tr><td><strong>νΈλμ­μ… κ΄€λ¦¬</strong></td><td>Springμ <code>@Transactional</code>λ΅ κ°„λ‹¨ν•κ² κ΄€λ¦¬ κ°€λ¥</td><td>JPAμ νΈλμ­μ… κ΄€λ¦¬λ¥Ό ν†µν•΄ κΈ°λ³Έμ μΌλ΅ μ κ³µλ¨</td></tr><tr><td><strong>κ²°κ³Ό λ§¤ν•‘</strong></td><td>μ§μ ‘ λ§¤ν•‘ (<code>fetch().list()</code>, <code>fetch().one()</code>)</td><td>JPA μ—”ν‹°ν‹° μλ™ λ§¤ν•‘ λ° λ³„λ„ DTOλ΅ λ§¤ν•‘ κ°€λ¥</td></tr><tr><td><strong>λ¬λ‹ μ»¤λΈ</strong></td><td>μƒλ€μ μΌλ΅ λ‚®μ, SQLμ— μµμ™ν•λ©΄ λ°”λ΅ μ‚¬μ© κ°€λ¥</td><td>μƒλ€μ μΌλ΅ λ†’μ, <code>QueryDSL</code>μ DSL(λ„λ©”μΈ νΉν™” μ–Έμ–΄)μ— μµμ™ν•΄μ Έμ•Ό ν•¨</td></tr><tr><td><strong>μ μ—°μ„±</strong></td><td>SQLμ λ¨λ“  κΈ°λ¥μ„ ν™μ©ν•  μ μμ</td><td>λ™μ  μΏΌλ¦¬ λ° μ΅°κ±΄ μ¶”κ°€μ— λ§¤μ° μ μ—°ν•¨</td></tr><tr><td><strong>μ§€μ›λλ” DB</strong></td><td>SQLμ„ μ§€μ›ν•λ” λ¨λ“  λ°μ΄ν„°λ² μ΄μ¤</td><td>JPA λλ” Hibernateμ™€ μ—°λ™λλ” λ¨λ“  λ°μ΄ν„°λ² μ΄μ¤</td></tr><tr><td><strong>λ³µμ΅ν• μΏΌλ¦¬ μ‘μ„±</strong></td><td>λ³µμ΅ν• SQL μΏΌλ¦¬λ„ μμ λ΅­κ² μ‘μ„± κ°€λ¥</td><td>λ³µμ΅ν• λ™μ  μΏΌλ¦¬λ¥Ό νƒ€μ… μ•μ „ν•κ² μ‘μ„± κ°€λ¥</td></tr><tr><td><strong>λΌμ΄λΈλ¬λ¦¬ μμ΅΄μ„±</strong></td><td><code>spring-boot-starter-data-jdbc</code></td><td><code>querydsl-jpa</code>, <code>querydsl-apt</code>, JPA μμ΅΄μ„± ν•„μ”</td></tr><tr><td><strong>μ„±λ¥</strong></td><td>SQLμ„ μ§μ ‘ μ‹¤ν–‰ν•μ—¬ μ„±λ¥ μµμ ν™” κ°€λ¥</td><td>Hibernateλ‚ JPAλ¥Ό κ±°μ³ μ‹¤ν–‰λλ―€λ΅ μ•½κ°„μ μ¤λ²„ν—¤λ“ λ°μƒ κ°€λ¥</td></tr></tbody></table>

### \[μ„±λ¥  λΉ„κµ ν‘]<br>

| ν•­λ©            | JdbcClient                  | QueryDSL                        |
| ------------- | --------------------------- | ------------------------------- |
| **μ‹¤ν–‰ μ†λ„**     | λΉ λ¦„. SQLμ„ μ§μ ‘ μ‹¤ν–‰ν•λ―€λ΅ μ„±λ¥ μµμ ν™” κ°€λ¥ | ORM κ³„μΈµμ„ ν†µν•΄ μ‹¤ν–‰λλ―€λ΅ μ¤λ²„ν—¤λ“ λ°μƒ        |
| **μΏΌλ¦¬ μƒμ„± λ°©μ‹**  | SQL μ§μ ‘ μ‘μ„±, λΉ λ¥΄μ§€λ§ μ μ§€λ³΄μ μ–΄λ ¤μ›€    | κ°μ²΄μ§€ν–¥μ μΌλ΅ μΏΌλ¦¬ μƒμ„±, μ μ§€λ³΄μμ„± λ›°μ–΄λ‚¨, λ‹¤μ† λλ¦Ό |
| **μΊμ‹ ν™μ©**     | κΈ°λ³Έμ μΌλ΅ μ κ³µν•μ§€ μ•μ               | JPAμ 1μ°¨ λ° 2μ°¨ μΊμ‹λ¥Ό ν™μ© κ°€λ¥          |
| **λ³µμ΅ν• μΏΌλ¦¬ μ„±λ¥** | μΏΌλ¦¬ μµμ ν™” κ°€λ¥, λΉ λ¥΄μ§€λ§ μλ™ μ‘μ—… ν•„μ”    | λ³µμ΅ν• λ§¤ν•‘μ΄ μλ™ν™”λμ§€λ§ μ„±λ¥ μ €ν• κ°€λ¥         |
| **λ™μ  μΏΌλ¦¬**     | κµ¬ν„ μ–΄λ ¤μ›€, λ™μ  μΏΌλ¦¬ μƒμ„± μ‹ μ„±λ¥ μ €ν• κ°€λ¥ | λ™μ  μΏΌλ¦¬ μ‘μ„±μ΄ μ©μ΄ν•κ³  μ μ§€λ³΄μμ— μ λ¦¬         |
| **νƒ€μ… μ•μ „μ„±**    | μ—†μ. SQLμ„ λ¬Έμμ—΄λ΅ μ‘μ„±            | νƒ€μ… μ•μ „μ„±μ„ λ³΄μ¥, μ»΄νμΌ μ‹μ μ— μ¤λ¥ λ°κ²¬ κ°€λ¥    |



