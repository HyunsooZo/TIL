---
description: 지난 분산락 포스팅에 대해 키교환 관련 리뷰를 받아 키교환이라는 개념에 대해 공부하고, 키교환이 필요한 분산락 케이스에 대해 조사해보았다.
---

# 🔃 Security : Key Exchange

## Key Exchange?

**Key Exchange**는 네트워크 환경에서 데이터를 안전하게 주고받기 위해 \
암호화 키를 안전하게 공유하는 메커니즘이다.\
키 교환은 주로 보안 통신(예: HTTPS, TLS)에서 사용되며, \
두 주체(송신자와 수신자)가 동일한 암호화 키를 공유하거나 상호 인증할 수 있도록 한다.

***

## **Key Exchange의 주요 방식**

### **대칭키 기반 키 교환**

* 송신자와 수신자가 **하나의 동일한 키**를 사용해 데이터를 암호화 및 복호화한다.
* 키를 안전하게 공유하는 것이 가장 중요한 과제이다.

#### **대표적인 방식**

* **Diffie-Hellman(DH)**: 두 주체가 공개된 값을 교환해, 이를 바탕으로 동일한 비밀키를 계산한다.
* **사전 공유 키(Pre-Shared Key)**: 안전한 채널(예: 직접 전달)을 통해 키를 미리 공유한다.

***

### **비대칭키 기반 키 교환**

* 공개키(Public Key)와 비밀키(Private Key)를 이용한 방식으로, \
  공개키로 암호화된 데이터를 비밀키로만 복호화할 수 있다.

#### **대표적인 방식**

* **RSA**: 공개키로 암호화된 데이터를 안전하게 전달하여 대칭키를 공유한다.
* **Elliptic Curve Diffie-Hellman(ECDH)**: Diffie-Hellman 방식의 고도화된 버전으로, \
  보안성과 성능이 우수하다.

***

## **Key Exchange의 특징**

* 키 자체를 직접 주고받지 않으므로 도청 위험이 줄어든다.
* 암호화된 데이터 전송이 가능해진다.
* 안전한 통신 세션(예: HTTPS)을 설정하는 데 필수적이다.

***

## Key Exchange와 **Distributed Lock**에서의 차이

### **Key Exchange의 역할**

* 암호화 또는 보안 통신을 위한 키 공유에 중점.
* 예: 클라이언트-서버 간 TLS 세션 설정.

### **Distributed Lock의 키 관리**

* 분산락에서 "키"는 **락 상태를 식별**하는 값으로, 리소스 동기화를 위한 정보다.
* 분산 시스템에서 각 애플리케이션 인스턴스는 동일한 \
  중앙 저장소(예: Redis)를 사용하여 락의 상태를 공유한다.

***

## **Distributed Lock에서 키 관리**&#x20;

### **중앙 저장소 방식 (Redis)**

* Redis는 락의 상태를 관리하는 중앙 저장소 역할을 한다.
* 모든 인스턴스는 Redis에 저장된 락 키를 참조하여 상태를 확인하거나 업데이트한다.
* Redis를 통해 인스턴스 간에 키 상태가 "자동 동기화"되므로 별도의 키 교환이 필요 없다.

### **P2P 방식**

* 중앙 저장소 없이 인스턴스들이 직접 락 상태를 교환한다.
* 네트워크 메시지를 통해 락 키를 주고받아야 하므로 키 교환의 개념이 들어간다.
* 구현이 복잡하고 동기화 문제를 처리하기 어렵다.

***

## **결론**

* **Key Exchange**는 보안 통신에서 암호화 키를 안전하게 공유하기 위한 메커니즘이다.
* **Distributed Lock**에서 키는 리소스 상태를 나타내는 값이며, \
  Redis 같은 중앙 저장소를 사용하면 키 교환 없이도 락 상태를 관리할 수 있다.
* 그러나 **중앙 저장소가 없을 경우 P2P 방식에서 키 교환이 필요할 수 있다.**
